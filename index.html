<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelVault: 8-Bit Finance</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #2c2c2c;
            --term-green: #4af626;
            --term-text: #e0e0e0;
            --border-light: #f0f0f0;
            --border-shadow: #111;
        }

        body {
            background-color: var(--bg-color);
            color: var(--term-text);
            font-family: 'Press Start 2P', cursive;
            margin: 20px;
            font-size: 12px;
            line-height: 1.5;
        }

        h1, h2 { color: var(--term-green); text-shadow: 2px 2px #000; }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* 8-Bit Container Style */
        .pixel-box {
            background: #444;
            border: 4px solid var(--border-light);
            box-shadow: 6px 6px 0px var(--border-shadow);
            padding: 20px;
            margin-bottom: 30px;
            position: relative;
        }

        .pixel-input {
            background: #222;
            border: 2px solid var(--term-green);
            color: white;
            font-family: 'Press Start 2P', cursive;
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }

        .pixel-btn {
            background: var(--term-green);
            color: black;
            border: 2px solid white;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            cursor: pointer;
            box-shadow: 4px 4px 0px #000;
            margin-top: 10px;
            text-transform: uppercase;
        }

        .pixel-btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #000;
        }

        /* Account List */
        .account-card {
            background: #333;
            border: 2px dashed var(--term-green);
            padding: 10px;
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .projection-result {
            margin-top: 20px;
            color: yellow;
            border-top: 2px solid white;
            padding-top: 10px;
        }

        select.pixel-input { height: 40px; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align: center;">PIXEL VAULT</h1>

    <div class="pixel-box">
        <h2>> New Account</h2>
        <input type="text" id="accName" class="pixel-input" placeholder="Account Name (e.g. Loot Stash)">
        <select id="accType" class="pixel-input">
            <option value="Checking">Checking</option>
            <option value="Savings">Savings</option>
        </select>
        <input type="number" id="accBalance" class="pixel-input" placeholder="Initial Balance ($)">
        <input type="number" id="accAPY" class="pixel-input" placeholder="APY % (e.g. 4.5)">
        <button class="pixel-btn" onclick="addAccount()">Create Account</button>
    </div>

    <div class="pixel-box">
        <h2>> Accounts</h2>
        <div id="accountList">
            <p>No accounts detected...</p>
        </div>
    </div>

    <div class="pixel-box">
        <h2>> Captain's Log</h2>
        <textarea id="journalEntry" class="pixel-input" rows="3" placeholder="Log entry..."></textarea>
        <button class="pixel-btn" onclick="addLog()">Save Entry</button>
        <div id="journalList" style="margin-top:20px; font-size: 10px;"></div>
    </div>

    <div class="pixel-box">
        <h2>> Future Sight (Compound Interest)</h2>
        <p>Select a Savings Account to project growth:</p>
        <select id="projectionAccount" class="pixel-input"></select>
        <input type="number" id="yearsToGrow" class="pixel-input" placeholder="Years to grow">
        <button class="pixel-btn" onclick="calculateGrowth()">Calculate</button>
        
        <div id="projectionOutput" class="projection-result" style="display:none;"></div>
    </div>
</div>

<script>
    // State
    let accounts = [];
    let logs = [];

    // --- Core Functions ---

    function addAccount() {
        const name = document.getElementById('accName').value;
        const type = document.getElementById('accType').value;
        const balance = parseFloat(document.getElementById('accBalance').value);
        const apy = parseFloat(document.getElementById('accAPY').value);

        if(!name || isNaN(balance)) {
            alert("Error: Invalid Input Data");
            return;
        }

        const newAccount = {
            id: Date.now(),
            name,
            type,
            balance,
            apy: apy || 0.0 // Default to 0 if empty
        };

        accounts.push(newAccount);
        renderAccounts();
        updateProjectionDropdown();
        clearInputs(['accName', 'accBalance', 'accAPY']);
    }

    function renderAccounts() {
        const list = document.getElementById('accountList');
        list.innerHTML = '';

        accounts.forEach(acc => {
            const div = document.createElement('div');
            div.className = 'account-card';
            div.innerHTML = `
                <div>
                    <strong>${acc.name}</strong> [${acc.type}]<br>
                    <span style="color: #4af626;">$${acc.balance.toFixed(2)}</span> | APY: ${acc.apy}%
                </div>
                <button class="pixel-btn" style="padding: 5px 10px; font-size: 10px;" onclick="editBalance(${acc.id})">EDIT</button>
            `;
            list.appendChild(div);
        });
    }

    function editBalance(id) {
        const acc = accounts.find(a => a.id === id);
        const newBal = prompt(`Update balance for ${acc.name}:`, acc.balance);
